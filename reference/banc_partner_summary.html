<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summarise the connectivity of banc neurons — banc_partner_summary • bancr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarise the connectivity of banc neurons — banc_partner_summary"><meta name="description" content="Returns synaptically connected partners for specified neurons. Understanding
synaptic partnerships is crucial for analyzing neural circuits in the Brain And
Nerve Cord (BANC) connectome, revealing how distributed control architecture
coordinates behaviour across brain and ventral nerve cord regions.
banc_partners returns details of each unitary synaptic
connection (including its xyz location)."><meta property="og:description" content="Returns synaptically connected partners for specified neurons. Understanding
synaptic partnerships is crucial for analyzing neural circuits in the Brain And
Nerve Cord (BANC) connectome, revealing how distributed control architecture
coordinates behaviour across brain and ventral nerve cord regions.
banc_partners returns details of each unitary synaptic
connection (including its xyz location)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bancr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../SUPPORT.html">Help</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://natverse.github.io">natverse</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/flyconnectome/bancr/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Summarise the connectivity of banc neurons</h1>
      <small class="dont-index">Source: <a href="https://github.com/flyconnectome/bancr/blob/main/R/partners.R" class="external-link"><code>R/partners.R</code></a></small>
      <div class="d-none name"><code>banc_partner_summary.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns synaptically connected partners for specified neurons. Understanding
synaptic partnerships is crucial for analyzing neural circuits in the Brain And
Nerve Cord (BANC) connectome, revealing how distributed control architecture
coordinates behaviour across brain and ventral nerve cord regions.</p>
<p><code>banc_partners</code> returns details of each unitary synaptic
connection (including its xyz location).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">banc_partner_summary</span><span class="op">(</span></span>
<span>  <span class="va">rootids</span>,</span>
<span>  partners <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outputs"</span>, <span class="st">"inputs"</span><span class="op">)</span>,</span>
<span>  synapse_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"synapses_250226"</span>, <span class="st">"synapses_v1"</span><span class="op">)</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  remove_autapses <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cleft.threshold <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  datastack_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">banc_partners</span><span class="op">(</span></span>
<span>  <span class="va">rootids</span>,</span>
<span>  partners <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"input"</span>, <span class="st">"output"</span><span class="op">)</span>,</span>
<span>  synapse_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"synapses_250226"</span>, <span class="st">"synapses_v1"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-rootids">rootids<a class="anchor" aria-label="anchor" href="#arg-rootids"></a></dt>
<dd><p>Character vector specifying one or more BANC rootids. As a
convenience this argument is passed to <code><a href="banc_ids.html">banc_ids</a></code> allowing you
to pass in data.frames, BANC URLs or simple ids.</p></dd>


<dt id="arg-partners">partners<a class="anchor" aria-label="anchor" href="#arg-partners"></a></dt>
<dd><p>Character vector, either "outputs" or "inputs" to specify the direction of synaptic connections to retrieve.</p></dd>


<dt id="arg-synapse-table">synapse_table<a class="anchor" aria-label="anchor" href="#arg-synapse-table"></a></dt>
<dd><p>Character, the name of the synapse CAVE table you wish to use. Defaults to the latest.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>Integer threshold for minimum number of synapses (default 0).</p></dd>


<dt id="arg-remove-autapses">remove_autapses<a class="anchor" aria-label="anchor" href="#arg-remove-autapses"></a></dt>
<dd><p>Logical, whether to remove self-connections (default TRUE).</p></dd>


<dt id="arg-cleft-threshold">cleft.threshold<a class="anchor" aria-label="anchor" href="#arg-cleft-threshold"></a></dt>
<dd><p>Numeric threshold for cleft filtering (default 0).</p></dd>


<dt id="arg-datastack-name">datastack_name<a class="anchor" aria-label="anchor" href="#arg-datastack-name"></a></dt>
<dd><p>An optional CAVE <code>datastack_name</code>. If unset a
sensible default is chosen.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="https://rdrr.io/pkg/fafbseg/man/flywire_partners.html" class="external-link">flywire_partner_summary</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a data.frame</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>note that the rootids you pass in must be up to date. See example.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/fafbseg/man/flywire_partners.html" class="external-link">flywire_partner_summary</a></code>, <code><a href="banc_latestid.html">banc_latestid</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Basic connectivity analysis</span></span></span>
<span class="r-in"><span><span class="va">sample_id</span><span class="op">=</span><span class="fu"><a href="banc_latestid.html">banc_latestid</a></span><span class="op">(</span><span class="st">"720575941478275714"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">banc_partner_summary</span><span class="op">(</span><span class="va">sample_id</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">banc_partner_summary</span><span class="op">(</span><span class="va">sample_id</span>, partners<span class="op">=</span><span class="st">'inputs'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Research application: Analyze descending neuron control circuits</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get DNa02 descending neurons that control walking behavior</span></span></span>
<span class="r-in"><span><span class="va">dna02_annotations</span> <span class="op">&lt;-</span> <span class="fu"><a href="banc_codex_annotations.html">banc_codex_annotations</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cell_type</span> <span class="op">==</span> <span class="st">"DNa02"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dna02_id</span> <span class="op">&lt;-</span> <span class="va">dna02_annotations</span><span class="op">$</span><span class="va">pt_root_id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find their downstream targets in the VNC</span></span></span>
<span class="r-in"><span><span class="va">dna02_outputs</span> <span class="op">&lt;-</span> <span class="fu">banc_partner_summary</span><span class="op">(</span><span class="va">dna02_id</span>, partners<span class="op">=</span><span class="st">'outputs'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_max</a></span><span class="op">(</span><span class="va">weight</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Visualize the circuit in neuroglancer</span></span></span>
<span class="r-in"><span><span class="fu">banc_partner_summary</span><span class="op">(</span><span class="va">sample_id</span>, partners<span class="op">=</span><span class="st">'inputs'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_max</a></span><span class="op">(</span><span class="va">weight</span>, n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="banc_scene.html">banc_scene</a></span><span class="op">(</span>open<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># plot input and output synapses of a neuron</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/nat/man/nclear3d.html" class="external-link">nclear3d</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fpi</span><span class="op">=</span><span class="fu">banc_partners</span><span class="op">(</span><span class="fu"><a href="banc_latestid.html">banc_latestid</a></span><span class="op">(</span><span class="st">"720575941478275714"</span><span class="op">)</span>, partners<span class="op">=</span><span class="st">'in'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dmurdoch.github.io/rgl/dev/reference/primitives.html" class="external-link">points3d</a></span><span class="op">(</span><span class="fu"><a href="banc_voxdims.html">banc_raw2nm</a></span><span class="op">(</span><span class="va">fpi</span><span class="op">$</span><span class="va">post_pt_position</span><span class="op">)</span>, col<span class="op">=</span><span class="st">'cyan'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fpo</span><span class="op">=</span><span class="fu">banc_partners</span><span class="op">(</span><span class="fu"><a href="banc_latestid.html">banc_latestid</a></span><span class="op">(</span><span class="st">"720575941478275714"</span><span class="op">)</span>, partners<span class="op">=</span><span class="st">'out'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dmurdoch.github.io/rgl/dev/reference/primitives.html" class="external-link">points3d</a></span><span class="op">(</span><span class="fu"><a href="banc_voxdims.html">banc_raw2nm</a></span><span class="op">(</span><span class="va">fpo</span><span class="op">$</span><span class="va">pre_pt_position</span><span class="op">)</span>, col<span class="op">=</span><span class="st">'red'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alexander Bates, Gregory Jefferis.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

