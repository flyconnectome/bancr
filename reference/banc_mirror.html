<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Mirror BANC Connectome Points — banc_mirror • bancr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Mirror BANC Connectome Points — banc_mirror"><meta name="description" content="This function mirrors 3D points in the BANC (Buhmann et al. Adult Neural Connectome)
coordinate system by transforming to JRC2018F, mirroring, and transforming back."><meta property="og:description" content="This function mirrors 3D points in the BANC (Buhmann et al. Adult Neural Connectome)
coordinate system by transforming to JRC2018F, mirroring, and transforming back."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bancr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../SUPPORT.html">Help</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://natverse.github.io">natverse</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/flyconnectome/bancr/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Mirror BANC Connectome Points</h1>
      <small class="dont-index">Source: <a href="https://github.com/flyconnectome/bancr/blob/v0.2.1/R/xform.R" class="external-link"><code>R/xform.R</code></a></small>
      <div class="d-none name"><code>banc_mirror.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function mirrors 3D points in the BANC (Buhmann et al. Adult Neural Connectome)
coordinate system by transforming to JRC2018F, mirroring, and transforming back.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">banc_mirror</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  banc.units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nm"</span>, <span class="st">"um"</span>, <span class="st">"raw"</span><span class="op">)</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  inverse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  transform_files <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tpsreg"</span>, <span class="st">"elastix"</span>, <span class="st">"navis_elastix_xform"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object containing 3D points (must be compatible with nat::xyzmatrix).</p></dd>


<dt id="arg-banc-units">banc.units<a class="anchor" aria-label="anchor" href="#arg-banc-units"></a></dt>
<dd><p>Character string specifying the banc.units of the input points.
Must be one of "nm" (nanometers), "um", or "raw" (BANC raw banc.units). Default is "nm".</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>Optional. A logical vector or expression to subset the input object.</p></dd>


<dt id="arg-inverse">inverse<a class="anchor" aria-label="anchor" href="#arg-inverse"></a></dt>
<dd><p>Logical. Not used in this function, kept for compatibility with banc_to_JRC2018F.</p></dd>


<dt id="arg-transform-files">transform_files<a class="anchor" aria-label="anchor" href="#arg-transform-files"></a></dt>
<dd><p>Optional. A vector of two file paths for custom transform files.
If NULL, uses default files.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Character string specifying the transformation method.
Must be either "elastix" or "tpsreg". Default is "elastix".</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="https://natverse.org/nat.templatebrains/reference/mirror_brain.html" class="external-link">nat.templatebrains::mirror_brain</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input object with mirrored 3D points.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function performs mirroring of BANC points by first transforming them to the JRC2018F
coordinate system, applying the mirroring operation, and then transforming them back to BANC.
It can use either Elastix transforms or thin-plate spline registration for the coordinate
system transformations.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="banc_to_JRC2018F.html">banc_to_JRC2018F</a></code> for the underlying transformation function.
<code><a href="https://natverse.org/nat.templatebrains/reference/mirror_brain.html" class="external-link">nat.templatebrains::mirror_brain</a></code> for the mirroring operation in JRC2018F space.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Example using saved tpsreg</span></span></span>
<span class="r-in"><span><span class="va">banc_neuropil.surf.m</span> <span class="op">&lt;-</span> <span class="fu">banc_mirror</span><span class="op">(</span><span class="va">banc_neuropil.surf</span>, method <span class="op">=</span> <span class="st">"tpsreg"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dmurdoch.github.io/rgl/dev/reference/scene.html" class="external-link">clear3d</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="banc_view.html">banc_view</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dmurdoch.github.io/rgl/dev/reference/plot3d.html" class="external-link">plot3d</a></span><span class="op">(</span><span class="va">banc_neuropil.surf</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, col <span class="op">=</span> <span class="st">"lightgrey"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dmurdoch.github.io/rgl/dev/reference/plot3d.html" class="external-link">plot3d</a></span><span class="op">(</span><span class="va">banc_neuropil.surf.m</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, col <span class="op">=</span> <span class="st">"green"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example using custom Elastix transforms</span></span></span>
<span class="r-in"><span><span class="fu"><a href="choose_banc.html">choose_banc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rootid</span> <span class="op">&lt;-</span> <span class="st">"720575941626035769"</span></span></span>
<span class="r-in"><span><span class="va">neuron.mesh</span> <span class="op">&lt;-</span> <span class="fu"><a href="banc_read_neuron_meshes.html">banc_read_neuron_meshes</a></span><span class="op">(</span><span class="va">rootid</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show neuron in BANC neuropil</span></span></span>
<span class="r-in"><span><span class="fu"><a href="banc_view.html">banc_view</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dmurdoch.github.io/rgl/dev/reference/plot3d.html" class="external-link">plot3d</a></span><span class="op">(</span><span class="va">neuron.mesh</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dmurdoch.github.io/rgl/dev/reference/plot3d.html" class="external-link">plot3d</a></span><span class="op">(</span><span class="va">banc_neuropil.surf</span>, alpha <span class="op">=</span> <span class="fl">0.1</span>, col <span class="op">=</span> <span class="st">"lightgrey"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show only the portion in the brain</span></span></span>
<span class="r-in"><span><span class="va">neuron.mesh.brain</span> <span class="op">&lt;-</span> <span class="fu"><a href="banc_decapitate.html">banc_decapitate</a></span><span class="op">(</span><span class="va">neuron.mesh</span>, invert <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Mirror in BANC space</span></span></span>
<span class="r-in"><span><span class="va">neuron.mesh.mirror</span> <span class="op">&lt;-</span> <span class="fu">banc_mirror</span><span class="op">(</span><span class="va">neuron.mesh.brain</span>,</span></span>
<span class="r-in"><span>transform_files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"brain_240721/BANC_to_template.txt"</span>,</span></span>
<span class="r-in"><span> <span class="st">"brain_240721/template_to_BANC.txt"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dmurdoch.github.io/rgl/dev/reference/plot3d.html" class="external-link">plot3d</a></span><span class="op">(</span><span class="va">neuron.mesh.mirror</span>, col <span class="op">=</span> <span class="st">"cyan"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alexander Bates, Gregory Jefferis.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

